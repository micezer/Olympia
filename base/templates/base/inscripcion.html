{% extends 'main.html' %}

{% block content %}

<style>
    main {
        padding-top: 5px;
        padding-bottom: 50px;
    }

    body {
    overflow: hidden;
}


    /* Main Container Styles */
    .form-container {
        display: flex;
        flex-direction: column;
        background: rgb(23, 56, 105);
    }

    .form-scroll-wrapper {
        flex: 1;
        padding: 20px;
        
    
    }

    /* Form Styles */
    .multi-page-form {
        max-width: 800px;
        margin: 0 auto;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Progress Bar */
    .form-progress {
        position: sticky;
        display: flex;
        margin-bottom: 30px;
        gap: 5px;
        top: 0;
        background: rgb(23, 56, 105);
        padding: 1px 0;
        z-index: 10;
    }

    .progress-step {
    flex: 1;
    text-align: center;
    padding: 10px 5px;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    font-weight: 900;
    font-size: 14px;
    border-radius: 4px;
    transition: all 0.3s ease;
    display: flex;              /* Add this */
    align-items: center;        /* Add this */
    justify-content: center;    /* Add this */
    line-height: 1.2; /* Adjust this value as needed */
            /* Add this to ensure full height */
}

    .progress-step.active {
        background: rgb(239, 179, 106);
        font-weight: 600;
    }

    /* Form Pages */
    .form-page {
        display: none;

    flex-direction: column;
    height: auto;
    min-height: calc(100vh - 150px); /* Adjust as needed */
}
    .form-page.active {

         display: flex;
    flex-direction: column;
    height: calc(100vh - [height-of-your-progress-bar]);
    }

    /* Form Elements */
    .form__title {
        color: white;
        text-align: center;
        margin-bottom: 25px;
        font-size: 17px;
        position: relative;
        padding-bottom: 10px;
    }

    .form__title:after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background: rgb(239, 179, 106);
    }

    fieldset {
    border: none;
    padding: 0 0 60px 0; /* Added bottom padding */

    overflow-y: auto;
    /* Adjust max-height to account for button space */
    max-height: calc(100vh - 250px); /* Increased space */
    margin-bottom: 20px; /* Added margin at bottom */
}

    .form__row {
        margin-bottom: 20px;
    }

    .form__label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: white;
    }

    .form__text {
        color: white;
        margin-bottom: 15px;
        display: block;
    }

    .form__input,
    .form__select,
    .form__textarea {
        width: 100%;
        padding: 14px;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 6px;
        font-size: 16px;
        color: white;
        transition: all 0.3s;
    }

    .form__input:focus,
    .form__select:focus,
    .form__textarea:focus {
        outline: none;
        background: rgba(255, 255, 255, 0.15);
    }

    .form__input::placeholder {
        color: rgba(255, 255, 255, 0.6);
    }

    /* Checkboxes and Radios */
    .checkbox-row,
    .radio-row {
        display: flex;
        align-items: flex-start;
        margin: 15px 0;
    }

    .form__check,
    .form__radio {
        margin-right: 10px;
        margin-top: 3px;
        accent-color: #1a3e72;
    }

    .form__label--box {
        font-weight: normal;
        color: white;
    }

    /* Navigation Buttons */
    .form-navigation {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    position: relative;
    padding: 10px 0;
    background: rgb(23, 56, 105); /* Match form background */
}


    .prev-btn,
    .next-btn,
    .form__submit {
        padding: 14px 25px;
        border: none;
        height: auto !important;

        border-radius: 6px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        flex: 1;
        text-align: center;
    }

    .next-btn,
    .form__submit {
        background: white;
        color: #1a3e72;
    }

    .next-btn:hover,
    .form__submit:hover {
        background: #0d2b52;
        transform: translateY(-2px);
    }

    .prev-btn {
        background: rgba(255, 255, 255, 0.1);
        color: white;
    }

    .prev-btn:hover {
        background: rgba(255, 255, 255, 0.2);
    }

/* Contenedor más ancho */
.confirmation-container {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 16px;
    padding: 30px;
    margin: 0 auto;
    box-sizing: border-box;
    width: 95%; /* Más ancho que antes (90%) */
    max-width: 1200px; /* Mucho más ancho (antes 800px) */
}

.confirmation-header {
    color: white;
    text-align: center;
    margin-bottom: 30px;
    font-size: 24px; /* Título más grande */
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.confirmation-content {
    color: white;
    max-height: 70vh;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: rgba(255,255,255,0.3) transparent;
}

.confirmation-content ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px; /* Más espacio entre elementos */
}

.confirmation-content li {
    padding: 20px 25px; /* Más espacio interno */
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px; /* Bordes más redondeados */
    word-break: break-word;
}

.confirmation-content strong {
    color: rgb(239, 179, 106);
    display: inline-block;
    min-width: 250px; /* Más ancho para las etiquetas */
    font-size: 1.1em;
    margin-right: 20px; /* Separación añadida */
}

/* Scrollbar más visible */
.confirmation-content::-webkit-scrollbar {
    width: 10px;
}

.confirmation-content::-webkit-scrollbar-track {
    background: transparent;
}

.confirmation-content::-webkit-scrollbar-thumb {
    background-color: rgba(255,255,255,0.4); /* Más visible */
    border-radius: 5px;
}

/* Para pantallas muy grandes (opcional) */
@media (min-width: 1600px) {
    .confirmation-container {
        max-width: 1400px;
    }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .confirmation-content {
        max-height: 50vh;
    }
    
    .confirmation-content li {
        padding: 10px;
    }
    
    .confirmation-content strong {
        display: block;
        min-width: auto;
        margin-bottom: 5px;
    }
}

    /* Animations */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .form-progress {
            flex-wrap: wrap;
        }

        .progress-step {
            flex: 1 0 100px;
            font-size: 12px;
            padding: 8px 3px;
        }

        .form-navigation {
            flex-direction: column;
        }

        .form-page {
            padding: 20px 15px;
        }

        fieldset {
            max-height: calc(100vh - 250px);
            /* Adjust for mobile */
        }
    }
</style>

<html>
    <head>
        <!-- Required libraries -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
        <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
        </head>
<main>

    <body>
        <div class="form-container">
            <div class="form-scroll-wrapper">
                <div class="multi-page-form">
                    <!-- Progress Indicator -->
                    <div class="form-progress">
                        <div class="progress-step active" data-step="1">Información Básica</div>
                        <div class="progress-step" data-step="2">Domiciliación</div>
                        <div class="progress-step" data-step="3">Autorización Menor</div>
                        <div class="progress-step" data-step="4">Protección Datos</div>
                        <div class="progress-step" data-step="5">Compromiso</div>
                        <div class="progress-step" data-step="5">Confirmación</div>
                    </div>

                    <!-- Form Container -->
                    <form id="multiForm" enctype="multipart/form-data">

                        <input type="hidden" name="_subject" value="Nueva Inscripción CFF Olympia">
                        <input type="hidden" name="_captcha" value="false">
                        <input type="hidden" name="_template" value="table">


                        <!-- Page 1: Main Information -->
                        <div class="form-page active" id="page1">

                            <fieldset class="form__field">
                                <h2 class="form__title"> INFORMACIÓN BÁSICA</h2>


                                <div class="form__data">
                                    <span class="form__text">
                                        Llamenos antes de rellenar el formulario: <a href="tel:626487563">626 48 75
                                            63</a>. De
                                        lo contario, su formulario no será validado. Para cualquier consulta en relación
                                        con
                                        este formulario o con el proceso de inscripción, puedes ponerte en contacto con
                                        nosotros en el teléfono <a href="tel:626487563">626 48 75 63</a> o a través del
                                        mail
                                        <a href="mailto:info@cffolympia.es">info@cffolympia.es</a>
                                    </span>
                                </div>

                                <div class="form__row">
                                    <label for="Nombre" class="form__label">Nombre Completo</label>
                                    <input id="Nombre" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="Nombre completo jugadora" required>
                                </div>

                                <div class="form__row">
                                    <label for="Nacimiento" class="form__label">Fecha de nacimiento</label>
                                    <input id="Nacimiento" class="form__input" type="date" placeholder="Escribe aquí"
                                        name="Fecha de nacimiento jugadora" required>
                                </div>

                                <div class="form__row">
                                    <label for="Categoria" class="form__label">Categoría</label>
                                    <select id="Categoria" name="Categoría jugadora" class="form__select" required>
                                        <option value="Olympeques (2019-2020)">Olympeques (2020-2021)</option>
                                        <option value="Benjamín (2015-2016-2017-2018)">Benjamín (2016-2017-2018-2019)
                                        </option>
                                        <option value="Alevín (2013-2014)">Alevín (2014-2015)</option>
                                        <option value="Infantil (2011-2012)">Infantil F7 y F11 (2012-2013)</option>
                                        <option value="Cadete F11 20 (2009-2010)">Cadete F11 20 (2010-2011)</option>
                                        <option value="Juvenil F11 (2006-2007-2008)">Juvenil F11 (2007-2008-2009)
                                        </option>
                                        <option value="Senior F11 (+18 años)">Senior F11 (+18 años)</option>
                                        <option value="Veteranas (+30 años)">Veteranas (+30 años)</option>
                                    </select>
                                </div>

                                <div class="form__row">
                                    <label for="Municipio" class="form__label">Municipio de Nacimiento</label>
                                    <input id="Municipio" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="Municipio de nacimiento jugadora" required>
                                </div>

                                <div class="form__row">
                                    <label for="Empadronada" class="form__label">Empadronada en</label>
                                    <input id="Empadronada" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="Empadronada en" required>
                                </div>

                                <div class="form__row">
                                    <label for="DNI" class="form__label">DNI Jugadora (mayores de 14)</label>
                                    <input id="DNI" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="DNI jugadora">
                                </div>

                                <div class="form__row">
                                    <label for="Email" class="form__label">Email Jugadora (mayores de edad)</label>
                                    <input id="Email" class="form__input" type="email" placeholder="Escribe aquí"
                                        name="Email jugadora">
                                </div>

                                <div class="form__row">
                                    <label for="Telefono" class="form__label">Teléfono Jugadora (mayores de
                                        edad)</label>
                                    <input id="Telefono" class="form__input" type="number" placeholder="Escribe aquí"
                                        name="Teléfono jugadora">
                                </div>
                                <div class="form__row">
                                    <label for="TelFijo" class="form__label">Teléfono Fijo</label>
                                    <input id="TelFijo" class="form__input" type="tel" placeholder="Escribe aquí"
                                        name="Teléfono fijo">
                                </div>

                                <div class="form__row">
                                    <label for="Domicilio" class="form__label">Domicilio</label>
                                    <input id="Domicilio" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="Domicilio" required>
                                </div>

                                <div class="form__row">
                                    <label for="Poblacion" class="form__label">Población</label>
                                    <input id="Poblacion" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="Población" required>
                                </div>

                                <div class="form__row">
                                    <label for="CodPostal" class="form__label">Código Postal</label>
                                    <input id="CodPostal" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="Código postal" required>
                                </div>
                                <h2 class="form__title">EXPERIENCIA DEPORTIVA</h2>

                                <div class="form__row">
                                    <label class="form__label">¿Has jugado al fútbol antes?</label>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="experiencia_futbol" value="Sí"
                                                class="form__radio">
                                            <span>Sí</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="experiencia_futbol" value="No"
                                                class="form__radio">
                                            <span>No</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="form__row">
                                    <label for="Experiencia" class="form__label">En caso afirmativo, cuéntanos en qué
                                        equipos y cuál es tu
                                        posición</label>
                                    <textarea id="Experiencia" class="form__textarea" name="Experiencia futbolística"
                                        rows="4"></textarea>
                                </div>
                                <h2 class="form__title">DATOS DE LOS PADRES/TUTORES</h2>

                                <div class="form__row">
                                    <label for="NombreMadreOTutor" class="form__label">Nombre Completo
                                        Madre/Tutor</label>
                                    <input id="NombreMadreOTutor" class="form__input" type="text"
                                        placeholder="Escribe aquí" name="Nombre madre/tutor" required>
                                </div>

                                <div class="form__row">
                                    <label for="DNIMadreOTutor" class="form__label">DNI Madre/Tutor</label>
                                    <input id="DNIMadreOTutor" class="form__input" type="text"
                                        placeholder="Escribe aquí" name="DNI madre/tutor" required>
                                </div>

                                <div class="form__row">
                                    <label for="EmailMadreOTutor" class="form__label">Email Madre/Tutor</label>
                                    <input id="EmailMadreOTutor" class="form__input" type="email"
                                        placeholder="Escribe aquí" name="Email madre/tutor" required>
                                </div>

                                <div class="form__row">
                                    <label for="TelefonoMadreOTutor" class="form__label">Teléfono Madre/Tutor</label>
                                    <input id="TelefonoMadreOTutor" class="form__input" type="tel"
                                        placeholder="Escribe aquí" name="Teléfono madre/tutor" required>
                                </div>

                                <div class="form__row">
                                    <label for="LugarNacimientoMadreOTutor" class="form__label">Lugar Nacimiento
                                        Madre/Tutor</label>
                                    <input id="LugarNacimientoMadreOTutor" class="form__input" type="text"
                                        placeholder="Escribe aquí" name="Lugar nacimiento madre/tutor" required>
                                </div>

                                <div class="form__row">
                                    <label for="NombrePadre" class="form__label">Nombre Completo Padre</label>
                                    <input id="NombrePadre" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="Nombre padre">
                                </div>

                                <div class="form__row">
                                    <label for="DNIPadre" class="form__label">DNI Padre</label>
                                    <input id="DNIPadre" class="form__input" type="text" placeholder="Escribe aquí"
                                        name="DNI padre">
                                </div>

                                <div class="form__row">
                                    <label for="EmailPadre" class="form__label">Email Padre</label>
                                    <input id="EmailPadre" class="form__input" type="email" placeholder="Escribe aquí"
                                        name="Email padre">
                                </div>

                                <div class="form__row">
                                    <label for="TelefonoPadre" class="form__label">Teléfono Padre</label>
                                    <input id="TelefonoPadre" class="form__input" type="tel" placeholder="Escribe aquí"
                                        name="Teléfono padre">
                                </div>

                                <div class="form__row">
                                    <label for="LugarNacimientoPadre" class="form__label">Lugar Nacimiento Padre</label>
                                    <input id="LugarNacimientoPadre" class="form__input" type="text"
                                        placeholder="Escribe aquí" name="Lugar nacimiento padre">
                                </div>
                                <h2 class="form__title">CONDICIONES Y CONSENTIMIENTOS</h2>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="Normas" name="Acepta normas"
                                        required>
                                    <label class="form__label--box" for="Normas">Acepto las normas y requisitos del
                                        club.</label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="Politicas"
                                        name="Acepta política privacidad" required>
                                    <label class="form__label--box" for="Politicas">Acepto la política de
                                        privacidad.</label>
                                </div>

                                <div class="form__row">
                                    <p class="form__text">Si no nos permite utilizar estos datos es posible que no
                                        podamos prestarle los servicios
                                        solicitados, pues tal información es necesaria para que podamos desarrollar
                                        nuestra actividad de manera
                                        coherente y efectiva.</p>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="ConsentimientoSalud"
                                        name="Consiente datos salud">
                                    <label class="form__label--box" for="ConsentimientoSalud">Consiento el uso de los
                                        datos relativos a mi salud o, en
                                        su caso, como tutores a la salud de mi hijo o menor a nuestro cargo para poder
                                        recibir los servicios
                                        solicitados.</label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="ConsentimientoRedes"
                                        name="Consiente imagen redes">
                                    <label class="form__label--box" for="ConsentimientoRedes">Consiento que se utilice
                                        mi imagen o, en su caso, como
                                        tutores la imagen de nuestro hijo o menor a nuestro cargo para su publicación a
                                        través de las redes sociales con
                                        el fin de dar a conocer la entidad y difundir su actividad.</label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="ConsentimientoInternet"
                                        name="Consiente imagen internet">
                                    <label class="form__label--box" for="ConsentimientoInternet">Consiento la
                                        publicación de mi imagen o, en su caso, la
                                        imagen de nuestro hijo o menor a nuestro cargo en Internet y otros medios
                                        similares para difundir las
                                        actividades de su entidad.</label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="ConsentimientoPublicidad"
                                        name="Consiente publicidad">
                                    <label class="form__label--box" for="ConsentimientoPublicidad">Consiento el uso de
                                        mis datos personales para recibir
                                        publicidad de su entidad.</label>
                                </div>

                                <div class="form__row">
                                    <p class="form__text">Podrá retirar cualquiera de estos consentimientos cuando lo
                                        considere oportuno.</p>
                                        <div class="form-navigation">
                                            <button type="button" class="next-btn">Siguiente</button>
                                            </div>
                                    </fieldset>
                                </div>
                               
                            

                            
                        </div>

                        <!-- Page 2: Domiciliación Form -->
                        <div class="form-page" id="page2">
                            <h2 class="form__title">FORMULARIO DE DOMICILIACIÓN</h2>

                            <fieldset class="form__field">
                                <div class="form__row">
                                    <label for="bancoNombre" class="form__label">Nombre del Banco</label>
                                    <input id="bancoNombre" class="form__input" type="text"
                                        placeholder="Ej: Banco Santander" name="Nombre del banco" required>
                                </div>

                                <div class="form__row">
                                    <label for="ibanCuenta" class="form__label">Número de cuenta IBAN</label>
                                    <input id="ibanCuenta" class="form__input" type="text"
                                        placeholder="ESXX XXXX XXXX XXXX XXXX XXXX" name="Número de cuenta IBAN"
                                        required>
                                </div>

                                <div class="form__row">
                                    <label for="titularCuenta" class="form__label">Titular de la cuenta</label>
                                    <input id="titularCuenta" class="form__input" type="text"
                                        placeholder="Nombre completo del titular" name="Titular de la cuenta" required>
                                </div>

                                <div class="form__row">
                                    <label for="dniTitular" class="form__label">DNI del titular</label>
                                    <input id="dniTitular" class="form__input" type="text"
                                        placeholder="DNI/NIE del titular" name="DNI del titular" required>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="aceptoDomiciliacion"
                                        name="Acepto domiciliación" required>
                                    <label class="form__label form__label--box" for="aceptoDomiciliacion">
                                        Autorizo al CFF Olympia a domiciliar en la cuenta indicada los recibos
                                        correspondientes a las
                                        cuotas de la temporada
                                    </label>
                                </div>
                                <div class="form-navigation">
                                    <button type="button" class="prev-btn">Anterior</button>
                                    <button type="button" class="next-btn">Siguiente</button>
                                    </div>
                            </fieldset>

                          
                        </div>

                        <!-- Page 3: Autorización Menor -->
                        <div class="form-page" id="page3">
                            <h2 class="form__title">AUTORIZACIÓN PARA INSCRIBIR A UN MENOR</h2>

                            <fieldset class="form__field">
                                <div class="form__row">
                                    <span class="form__text">
                                        Yo, <input type="text" class="form__input-inline"
                                            name="Nombre tutor autorización" required>,
                                        con DNI <input type="text" class="form__input-inline"
                                            name="DNI tutor autorización" required>,
                                        en calidad de padre/madre/tutor legal de la jugadora <span
                                            id="nombreJugadoraDisplay"></span>,
                                    </span>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="autorizoInscripcion"
                                        name="Autorizo inscripción" required>
                                    <label class="form__label form__label--box" for="autorizoInscripcion">
                                        Autorizo la inscripción de mi hijo/a en el CFF Olympia para la temporada
                                        2025/2026
                                    </label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="autorizoTratamiento"
                                        name="Autorizo tratamiento médico" required>
                                    <label class="form__label form__label--box" for="autorizoTratamiento">
                                        Autorizo al personal del club a tomar las decisiones médicas necesarias en caso
                                        de emergencia
                                    </label>
                                </div>

                                <div class="form__row">
                                    <label for="fechaAutorizacion" class="form__label">Fecha de autorización</label>
                                    <input id="fechaAutorizacion" class="form__input" type="date"
                                        name="Fecha autorización" required>
                                </div>

                                <div class="form__row">
                                    <label for="firmaDigital" class="form__label">Firma digital</label>
                                    <input id="firmaDigital" class="form__input" type="text"
                                        placeholder="Escriba su nombre completo como firma" name="Firma digital"
                                        required>
                                </div>
                                <div class="form-navigation">
                                    <button type="button" class="prev-btn">Anterior</button>
                                    <button type="button" class="next-btn">Siguiente</button>
                                    </div>
                            </fieldset>

                         
                        </div>

                        <!-- Page 4: Protección de Datos -->
                        <div class="form-page" id="page4">
                            <h2 class="form__title">PROTECCIÓN DE DATOS</h2>

                            <fieldset class="form__field">
                                <div class="form__row">
                                    <span class="form__text">
                                        De conformidad con lo establecido en la normativa vigente en Protección de Datos
                                        de Carácter
                                        Personal,
                                        le informamos que los datos personales facilitados serán tratados por CFF
                                        Olympia con la
                                        finalidad de gestionar
                                        su inscripción como jugadora del club.
                                    </span>
                                </div>

                                <div class="form__row radio-row">
                                    <input class="form__radio" type="radio" value="Acepto la Política de Privacidad"
                                        id="Politicas" name="Acepta política privacidad" required>
                                    <label class="form__label form__label--box" for="Politicas">
                                        Acepto la política de privacidad del CFF Olympia
                                    </label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="consentimientoDatosSalud"
                                        name="Consiento uso datos salud" required>
                                    <label class="form__label form__label--box" for="consentimientoDatosSalud">
                                        Consiento el uso de los datos relativos a la salud de la jugadora para poder
                                        recibir los
                                        servicios solicitados
                                    </label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="consentimientoImagen"
                                        name="Consiento uso imagen">
                                    <label class="form__label form__label--box" for="consentimientoImagen">
                                        Consiento que se utilice la imagen de la jugadora para la difusión de
                                        actividades del club
                                    </label>
                                </div>

                                <div class="form__row">
                                    <label for="fechaProteccionDatos" class="form__label">Fecha</label>
                                    <input id="fechaProteccionDatos" class="form__input" type="date"
                                        name="Fecha protección datos" required>
                                </div>
                                <div class="form-navigation">
                                    <button type="button" class="prev-btn">Anterior</button>
                                    <button type="button" class="next-btn">Siguiente</button>
                                    </div>
                            </fieldset>

                          
                        </div>

                        <!-- Page 5: Carta de Compromiso -->
                        <div class="form-page" id="page5">
                            <h2 class="form__title">CARTA DE COMPROMISO</h2>

                            <fieldset class="form__field">
                                <div class="form__row">
                                    <span class="form__text">
                                        La jugadora <span id="nombreJugadoraDisplay2"></span> y sus representantes
                                        declaran conocer y
                                        aceptar:
                                    </span>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="compromisoNormas"
                                        name="Acepta normas club" required>
                                    <label class="form__label form__label--box" for="compromisoNormas">
                                        Las normas de funcionamiento interno del club
                                    </label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="compromisoAsistencia"
                                        name="Compromiso asistencia" required>
                                    <label class="form__label form__label--box" for="compromisoAsistencia">
                                        El compromiso de asistencia a entrenamientos y partidos
                                    </label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="compromisoPagos"
                                        name="Compromiso pagos" required>
                                    <label class="form__label form__label--box" for="compromisoPagos">
                                        El compromiso de pago puntual de las cuotas establecidas
                                    </label>
                                </div>

                                <div class="form__row checkbox-row">
                                    <input class="form__check" type="checkbox" id="compromisoConducta"
                                        name="Compromiso conducta" required>
                                    <label class="form__label form__label--box" for="compromisoConducta">
                                        Las normas de conducta y fair play
                                    </label>
                                </div>

                                <div class="form__row">
                                    <label for="fechaCompromiso" class="form__label">Fecha</label>
                                    <input id="fechaCompromiso" class="form__input" type="date" name="Fecha compromiso"
                                        required>
                                </div>

                                <div class="form__row">
                                    <label for="firmaCompromiso" class="form__label">Firma del representante</label>
                                    <input id="firmaCompromiso" class="form__input" type="text"
                                        placeholder="Nombre completo como firma" name="Firma compromiso" required>
                                </div>
                                <div class="form-navigation">
                                    <button type="button" class="prev-btn">Anterior</button>
                                    <button type="button" class="next-btn">Revisar y Confirmar</button>
                                    </div>
                            </fieldset>

                            <!-- In page 5, change the submit button to a next button -->
                           
                        </div>
                        <!-- Add this right before the closing </form> tag -->
                        <!-- Page 6: Confirmation -->
                        <div class="form-page" id="page6">
                        
                                    <div class="form-navigation">
                                        <button type="button" class="prev-btn">Anterior</button>
                                        <button type="submit" class="form__submit">Confirmar y Enviar</button>

                                    </div>
                                    <div id="confirmationData" class="confirmation-content"></div>
  
                     
                        
                                        
                        </div>
                    </form>
                </div>
            </div>

        <script>

        document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('multiForm');

        form.addEventListener('submit', async function(e) {
            e.preventDefault();
        const submitBtn = form.querySelector('button[type="submit"]');

        // Validación básica
        const requiredFields = form.querySelectorAll('[required]');
        let isValid = true;
    
    requiredFields.forEach(field => {
      if (!field.value) {
            field.style.borderColor = 'red';
        isValid = false;
      }
    });

        if (!isValid) {
            alert('Por favor complete todos los campos requeridos');
        return;
    }

        submitBtn.disabled = true;
        submitBtn.textContent = "Enviando...";

        try {
      const response = await fetch('https://formsubmit.co/ajax/moezehero@gmail.com', {
            method: 'POST',
        body: new FormData(form),
        headers: {
            'Accept': 'application/json'
        }
      });

        const result = await response.json();

        if (result.success) {
            alert('✅ Formulario enviado con éxito');
        form.reset();
        // Opcional: Redireccionar
        // window.location.href = "gracias.html";
      } else {
        throw new Error('Error en el servidor');
      }
    } catch (error) {
            console.error('Error:', error);
        alert('❌ Error al enviar. Contacte al club directamente.');
    } finally {
            submitBtn.disabled = false;
        submitBtn.textContent = "Confirmar y Enviar";
    }
  });
});

            // Testing mode flag - set to true when testing
            const TESTING_MODE = true;

            document.addEventListener('DOMContentLoaded', function () {
                // Form navigation
                const form = document.getElementById('multiForm');
                const pages = document.querySelectorAll('.form-page');
                const progressSteps = document.querySelectorAll('.progress-step');
                let currentPage = 0;

                // Show first page
                showPage(currentPage);

                // Next button click
                document.querySelectorAll('.next-btn').forEach(button => {
                    button.addEventListener('click', function () {
                        if (validatePage(currentPage)) {
                            // If going to last page (confirmation), gather all data first
                            if (currentPage === pages.length - 2) {
                                gatherConfirmationData();
                            }
                            currentPage++;
                            showPage(currentPage);
                        }
                    });
                });

                // Previous button click
                document.querySelectorAll('.prev-btn').forEach(button => {
                    button.addEventListener('click', function () {
                        currentPage--;
                        showPage(currentPage);
                    });
                });

                // Show specific page
                function showPage(index) {
                    pages.forEach((page, i) => {
                        page.classList.toggle('active', i === index);
                    });

                    progressSteps.forEach((step, i) => {
                        step.classList.toggle('active', i <= index);
                    });

                    // Update displayed player name
                    const playerName = document.getElementById('Nombre').value;
                    document.querySelectorAll('#nombreJugadoraDisplay, #nombreJugadoraDisplay2').forEach(el => {
                        el.textContent = playerName || '[Nombre de la jugadora]';
                    });

                    // Scroll to top of form content
                    document.querySelector('.form-scroll-wrapper').scrollTop = 0;
                }

                // Validate page before proceeding
                function validatePage(index) {
                    if (TESTING_MODE) return true; // Skip validation in testing mode

                    const currentPage = pages[index];
                    const requiredInputs = currentPage.querySelectorAll('[required]');
                    let isValid = true;

                    requiredInputs.forEach(input => {
                        if (!input.value && (input.type !== 'checkbox' && input.type !== 'radio')) {
                            input.style.borderColor = 'red';
                            isValid = false;
                        } else if ((input.type === 'checkbox' || input.type === 'radio') && !input.checked) {
                            input.style.outline = '1px solid red';
                            isValid = false;
                        } else {
                            input.style.borderColor = '';
                            input.style.outline = '';
                        }
                    });

                    if (!isValid) {
                        alert('Por favor, complete todos los campos requeridos antes de continuar.');
                    }

                    return isValid;
                }

                // Gather all form data for confirmation page
                function gatherConfirmationData() {
                    const formData = new FormData(form);
                    let confirmationHTML = '<ul style="list-style-type: none; padding: 0;">';

                    formData.forEach((value, key) => {
                        if (value && typeof value === 'string' && value.trim() !== '') {
                            confirmationHTML += `<li><strong>${key}:</strong> ${value}</li>`;
                        }
                    });

                    confirmationHTML += '</ul>';
                    document.getElementById('confirmationData').innerHTML = confirmationHTML;
                }

                // Update player name displays when name changes
                document.getElementById('Nombre').addEventListener('input', function () {
                    document.querySelectorAll('#nombreJugadoraDisplay, #nombreJugadoraDisplay2').forEach(el => {
                        el.textContent = this.value || '[Nombre de la jugadora]';
                    });
                });

                // Auto-fill form in testing mode
                if (TESTING_MODE) {
                    autoFillForm();
                }

                // Function to auto-fill form for testing
                function autoFillForm() {
                    // Basic information
                    document.getElementById('Nombre').value = 'Test Jugadora';
                    document.getElementById('Nacimiento').value = '2010-01-01';
                    document.getElementById('Categoria').value = 'Alevín (2014-2015)';
                    document.getElementById('Municipio').value = 'Test Municipio';
                    document.getElementById('Empadronada').value = 'Test Empadronamiento';
                    document.getElementById('Domicilio').value = 'Test Domicilio';
                    document.getElementById('Poblacion').value = 'Test Población';
                    document.getElementById('CodPostal').value = '28001';

                    // Experience
                    document.querySelector('input[name="experiencia_futbol"][value="Sí"]').checked = true;
                    document.getElementById('Experiencia').value = 'Test experiencia';

                    // Parent information
                    document.getElementById('NombreMadreOTutor').value = 'Test Madre';
                    document.getElementById('DNIMadreOTutor').value = '12345678A';
                    document.getElementById('EmailMadreOTutor').value = 'test@example.com';
                    document.getElementById('TelefonoMadreOTutor').value = '600000000';
                    document.getElementById('LugarNacimientoMadreOTutor').value = 'Test Lugar';

                    // Checkboxes
                    document.getElementById('Normas').checked = true;
                    document.getElementById('Politicas').checked = true;
                    document.getElementById('ConsentimientoSalud').checked = true;
                    document.getElementById('ConsentimientoRedes').checked = true;
                    document.getElementById('ConsentimientoInternet').checked = true;
                    document.getElementById('ConsentimientoPublicidad').checked = true;

                    // Page 2 - Domiciliation
                    document.getElementById('bancoNombre').value = 'Test Banco';
                    document.getElementById('ibanCuenta').value = 'ES00 0000 0000 0000 0000 0000';
                    document.getElementById('titularCuenta').value = 'Test Titular';
                    document.getElementById('dniTitular').value = '12345678A';
                    document.getElementById('aceptoDomiciliacion').checked = true;

                    // Page 3 - Minor Authorization
                    document.querySelector('input[name="Nombre tutor autorización"]').value = 'Test Tutor';
                    document.querySelector('input[name="DNI tutor autorización"]').value = '12345678A';
                    document.getElementById('autorizoInscripcion').checked = true;
                    document.getElementById('autorizoTratamiento').checked = true;
                    document.getElementById('fechaAutorizacion').value = '2025-01-01';
                    document.getElementById('firmaDigital').value = 'Test Firma';

                    // Page 4 - Data Protection
                    document.querySelector('input[name="Acepta política privacidad"]').checked = true;
                    document.getElementById('consentimientoDatosSalud').checked = true;
                    document.getElementById('consentimientoImagen').checked = true;
                    document.getElementById('fechaProteccionDatos').value = '2025-01-01';

                    // Page 5 - Commitment Letter
                    document.getElementById('compromisoNormas').checked = true;
                    document.getElementById('compromisoAsistencia').checked = true;
                    document.getElementById('compromisoPagos').checked = true;
                    document.getElementById('compromisoConducta').checked = true;
                    document.getElementById('fechaCompromiso').value = '2025-01-01';
                    document.getElementById('firmaCompromiso').value = 'Test Firma';
                }
            });


        </script>

    </body>
</main>

</html>



{% endblock content %}
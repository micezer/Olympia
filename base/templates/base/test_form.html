{% extends 'main.html' %}
{% load static %}

{% block content %}

<!DOCTYPE html>
<html>

<head>
    <title>Inscripción de Jugadoras</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
        }

        .error {
            color: red;
            margin-top: 5px;
        }
    </style>
</head>

<body>
    <h1>Formulario de Inscripción</h1>

    <form id="formInscripcion" method="post" action="{% url 'enviar_email' %}">
        {% csrf_token %}

        <h2>Datos Personales</h2>
        <div class="form-group">
            <label for="nombre_completo">Nombre Completo*</label>
            <input type="text" id="nombre_completo" name="nombre_completo" required>
        </div>

        <div class="form-group">
            <label for="fecha_nacimiento">Fecha de Nacimiento*</label>
            <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required>
        </div>

        <div class="form-group">
            <label for="dni">DNI/NIE*</label>
            <input type="text" id="dni" name="dni" required>
        </div>

        <h2>Datos Deportivos</h2>
        <div class="form-group">
            <label for="posicion">Posición*</label>
            <select id="posicion" name="posicion" required>
                <option value="">Seleccione...</option>
                <option value="Portera">Portera</option>
                <option value="Defensa">Defensa</option>
                <option value="Centrocampista">Centrocampista</option>
                <option value="Delantera">Delantera</option>
            </select>
        </div>

        <div class="form-group">
            <label for="club_anterior">Club Anterior (opcional)</label>
            <input type="text" id="club_anterior" name="club_anterior">
        </div>

        <h2>Contacto</h2>
        <div class="form-group">
            <label for="email">Email*</label>
            <input type="email" id="email" name="email" required>
        </div>

        <div class="form-group">
            <label for="contacto_emergencia">Teléfono de Emergencia*</label>
            <input type="tel" id="contacto_emergencia" name="contacto_emergencia" required>
        </div>

        <button type="submit">Enviar Inscripción</button>
        <div id="mensajeResultado"></div>
    </form>

    <script>
        document.getElementById('formInscripcion').addEventListener('submit', async function (e) {
            e.preventDefault();
            const form = e.target;
            const boton = form.querySelector('button[type="submit"]');
            const mensaje = document.getElementById('mensajeResultado');

            boton.disabled = true;
            mensaje.textContent = 'Enviando...';
            mensaje.style.color = 'inherit';

            try {
                const response = await fetch(form.action, {
                    method: 'POST',
                    body: new FormData(form),
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest',
                        'X-CSRFToken': form.querySelector('[name=csrfmiddlewaretoken]').value
                    }
                });

                const data = await response.json();

                if (data.status === 'success') {
                    mensaje.textContent = '✅ ' + data.message;
                    mensaje.style.color = 'green';
                    form.reset();
                } else {
                    throw new Error(data.message || 'Error en el servidor');
                }
            } catch (error) {
                mensaje.textContent = '❌ ' + error.message;
                mensaje.style.color = 'red';
                console.error('Error:', error);
            } finally {
                boton.disabled = false;
            }
        });
    </script>
</body>

</html>

{% endblock %}
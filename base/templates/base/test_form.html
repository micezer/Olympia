{% extends 'main.html' %}
{% load static %}

{% block content %}

<!DOCTYPE html>
<html>

<head>
    <title>Inscripción de Jugadoras</title>
    <style>
        :root {
            --azul-oscuro: rgb(31,45,82);
            --oro: rgb(239,179,106);
            --oro-claro: #f5e6ab;
            --blanco: #ffffff;
            --gris-claro: #f5f5f5;
            --sombra: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes shine {
            0% {
                box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
            }

            50% {
                box-shadow: 0 0 20px rgb(239,179,106);
            }

            100% {
                box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
            }
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--azul-oscuro);
            color: var(--blanco);
            background-image: radial-gradient(circle at 10% 20%, rgba(212, 175, 55, 0.1) 0%, rgba(10, 26, 47, 1) 90%);
        }

        h1 {
            text-align: center;
            color: var(--oro);
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            animation: fadeIn 0.8s ease-out;
            position: relative;
        }

        h1:after {
            content: '';
            display: block;
            width: 100px;
            height: 3px;
            background: var(--oro);
            margin: 15px auto;
            border-radius: 3px;
        }

        h2,
        h3 {
            color: var(--oro);
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        h2:after,
        h3:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 2px;
            background: var(--oro);
        }

        /* Estilos para el menú de pasos */
        .steps-menu {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin: 40px auto; /* Centrado horizontal con margen vertical */
    max-width: 90%; /* Opcional: limita el ancho máximo */
    padding-top: 40px; /* Empuja el contenido hacia abajo */
    animation: fadeIn 0.6s ease-out;
    justify-content: center; /* Centra los elementos horizontalmente */
}

        .step-card {
            border: 2px solid var(--oro);
            border-radius: 10px;
            padding: 20px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            background-color: rgba(10, 26, 47, 0.8);
            color: var(--blanco);
            box-shadow: var(--sombra);
            position: relative;
            overflow: hidden;
        }

        .step-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .step-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
            transition: 0.5s;
        }

        .step-card:hover:before {
            left: 100%;
        }

        .step-card.completed {
            background-color: rgba(212, 175, 55, 0.1);
            border-color: var(--oro-claro);
        }

        .step-card.active {
            background-color: var(--oro);
            color: var(--azul-oscuro);
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        .step-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
            border-color: #555;
        }

        .step-number {
            font-weight: bold;
            font-size: 1.4rem;
            margin-bottom: 8px;
            color: var(--oro);
            transition: all 0.3s;
        }

        .step-card.active .step-number,
        .step-card.completed .step-number {
            color: var(--azul-oscuro);
        }

        .step-card.locked .step-number {
            color: #777;
        }

        /* Estilos para el formulario de pasos */
        .form-container {
            display: none;
            position: relative;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-top: 50px;

            box-shadow: var(--sombra);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            animation: fadeIn 0.5s ease-out;
        }

        .form-container.active {

            display: block;
        }

        .form-page {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .form-page.active {
            display: block;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--oro-claro);
            transition: all 0.3s;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            font-size: 16px;
            background-color: rgba(10, 26, 47, 0.7);
            color: var(--blanco);
            transition: all 0.3s;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--oro);
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.3);
        }

        input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            transform: scale(1.3);
            accent-color: var(--oro);
        }

        .navigation-buttons {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
        }

        .nav-arrows {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        button {
            background: var(--oro);
            color: var(--azul-oscuro);
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            background: var(--oro-claro);
        }

        button:active {
            transform: translateY(1px);
        }

        button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        button.secondary {
            background: transparent;
            color: var(--oro);
            border: 1px solid var(--oro);
        }

        button.secondary:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        .arrow-btn {
    background: var(--oro);
    color: white;
    font-size: 18px; /* Reduced from 24px */
    padding: 0 10px; /* Horizontal padding only */
    border: 4px solid var(--oro);
    border-radius: 6px; /* Smaller rounded corners */
    width: auto; /* Let content determine width */
    margin: 0 5px; /* Adds 5px space on left/right sides */

    min-width: 40px; /* Minimum width */
    height: 40px; /* Fixed height */

    display: flex;
    gap: 10px; /* Adds 10px space between all buttons */
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    cursor: pointer;
}

/* Rest of the styles remain the same */
.arrow-btn:hover {
    animation: shine 2s infinite;
}

.arrow-btn:disabled {
    border-color: #555;
    color: #555;
}

.arrow-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
    transition: 0.5s;
}

.arrow-btn:hover::before {
    left: 100%;
}

        /* Estilos para la página de revisión */
        .review-container {
            display: none;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--sombra);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            animation: fadeIn 0.5s ease-out;
        }

        .review-container.active {
            display: block;
        }

        .review-section {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        .review-section:last-child {
            border-bottom: none;
        }

        .review-section h3 {
            color: var(--oro);
            margin-bottom: 20px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
        }

        .review-section h3:before {
            content: '✓';
            display: inline-block;
            margin-right: 10px;
            color: var(--oro);
        }

        .review-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .review-table td {
            padding: 15px;
            border: 1px solid rgba(212, 175, 55, 0.1);
            transition: all 0.3s;
        }

        .review-table tr:nth-child(even) {
            background-color: rgba(10, 26, 47, 0.5);
        }

        .review-table tr:hover td {
            background-color: rgba(212, 175, 55, 0.1);
        }

        .review-table td:first-child {
            font-weight: 500;
            color: var(--oro-claro);
            width: 30%;
        }

        .submit-container {
            text-align: center;
            margin-top: 40px;
        }

        .error-message {
            color: #ff6b6b;
            margin-top: 8px;
            font-size: 0.9rem;
            animation: fadeIn 0.3s ease-out;
        }
    

        .progress-indicator {
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            color: var(--oro);
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }


        .progress-indicator:before,
        .progress-indicator:after {
            content: '•••';
            letter-spacing: 3px;
            margin: 0 15px;
            color: var(--oro);
        }

        /* Mensajes */
        #messageContainer {
            margin-top: 30px;
            min-height: 50px;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .alert-success {
            background-color: rgba(46, 125, 50, 0.2);
            border: 1px solid #2e7d32;
            color: #a5d6a7;
        }

        .alert-error {
            background-color: rgba(198, 40, 40, 0.2);
            border: 1px solid #c62828;
            color: #ffabab;
        }

        .alert-info {
            background-color: rgba(30, 136, 229, 0.2);
            border: 1px solid #1e88e5;
            color: #90caf9;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .steps-menu {
                grid-template-columns: 1fr 1fr;
            }

            .form-container,
            .review-container {
                padding: 20px;
            }

            h1 {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .steps-menu {
                grid-template-columns: 1fr;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }

            button,
            .arrow-btn {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <h1>Formulario de Inscripción</h1>

    <!-- Menú de pasos -->
    <div class="steps-menu" id="stepsMenu">
        <div class="step-card" data-step="1" onclick="navigateToStep(1)">
            <div>Información Básica</div>
        </div>
        <div class="step-card locked" data-step="2" onclick="navigateToStep(2)">
            <div>Domiciliación</div>
        </div>
        <div class="step-card locked" data-step="3" onclick="navigateToStep(3)">
            <div>Autorización</div>
        </div>
        <div class="step-card locked" data-step="4" onclick="navigateToStep(4)">
            <div>Protección Datos</div>
        </div>
        <div class="step-card locked" data-step="5" onclick="navigateToStep(5)">
            <div>Compromiso</div>
        </div>
        <div class="step-card locked" data-step="6" onclick="navigateToStep(6)">
            <div>Revisión Final</div>
        </div>
    </div>

    <!-- Contenedor del formulario actual -->
    <div id="currentFormContainer">
<!-- Paso 1: Información Básica -->
<div class="form-container" id="step1Form">
    <h2>Información Básica</h2>

    <!-- Página 1 de Paso 1 -->
    <div class="form-page active" data-step="1" data-page="1">
        <div class="progress-indicator">Página 1 de 10</div>

        <div class="form-group">
            <label for="nombre_completo">Nombre Completo*</label>
            <input type="text" id="nombre_completo" name="nombre_completo" placeholder="Escribe tu nombre completo"
                required>
            <div class="error-message" id="nombre_completo_error"></div>
        </div>

        <div class="form-group">
            <label for="fecha_nacimiento">Fecha de nacimiento*</label>
            <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required>
            <div class="error-message" id="fecha_nacimiento_error"></div>
        </div>

        <div class="form-group">
            <label for="dni_jugadora">DNI Jugadora (mayores de 14 años)</label>
            <input type="text" id="dni_jugadora" name="dni_jugadora" placeholder="Escribe el DNI de la jugadora">
            <div class="error-message" id="dni_jugadora_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" disabled>&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 1)"> &gt;</button>
        </div>
    </div>

    <!-- Página 2 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="2">
        <div class="progress-indicator">Página 2 de 10</div>
        <div class="form-group">
            <label for="email_jugadora">Email Jugadora (mayores de edad)</label>
            <input type="email" id="email_jugadora" name="email_jugadora" placeholder="correo@ejemplo.com">
            <div class="error-message" id="email_jugadora_error"></div>
        </div>

        <div class="form-group">
            <label for="telefono_jugadora">Teléfono Jugadora (mayores de edad)</label>
            <input type="tel" id="telefono_jugadora" name="telefono_jugadora" placeholder="Ej: 600123456">
            <div class="error-message" id="telefono_jugadora_error"></div>
        </div>

        <div class="form-group">
            <label for="telefono_fijo">Teléfono Fijo</label>
            <input type="tel" id="telefono_fijo" name="telefono_fijo" placeholder="Ej: 910123456">
            <div class="error-message" id="telefono_fijo_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 2)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 2)"> &gt;</button>
        </div>
    </div>

    <!-- Página 3 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="3">
        <div class="progress-indicator">Página 3 de 10</div>
        <div class="form-group">
            <label for="municipio_nacimiento">Municipio de Nacimiento*</label>
            <input type="text" id="municipio_nacimiento" name="municipio_nacimiento" placeholder="Ej: Madrid" required>
            <div class="error-message" id="municipio_nacimiento_error"></div>
        </div>

        <div class="form-group">
            <label for="empadronada_en">Empadronada en*</label>
            <input type="text" id="empadronada_en" name="empadronada_en" placeholder="Ej: Madrid" required>
            <div class="error-message" id="empadronada_en_error"></div>
        </div>

        <div class="form-group">
            <label for="domicilio">Domicilio*</label>
            <input type="text" id="domicilio" name="domicilio" placeholder="Calle, número, piso..." required>
            <div class="error-message" id="domicilio_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 3)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 3)"> &gt;</button>
        </div>
    </div>

    <!-- Página 4 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="4">
        <div class="progress-indicator">Página 4 de 10</div>
        <div class="form-group">
            <label for="poblacion">Población*</label>
            <input type="text" id="poblacion" name="poblacion" placeholder="Ej: Getafe" required>
            <div class="error-message" id="poblacion_error"></div>
        </div>

        <div class="form-group">
            <label for="codigo_postal">Código Postal*</label>
            <input type="text" id="codigo_postal" name="codigo_postal" placeholder="Ej: 28001" required>
            <div class="error-message" id="codigo_postal_error"></div>
        </div>

        <div class="form-group">
            <label for="provincia">Provincia*</label>
            <input type="text" id="provincia" name="provincia" placeholder="Ej: Madrid" required>
            <div class="error-message" id="provincia_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 4)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 4)"> &gt;</button>
        </div>
    </div>

    <!-- Página 5 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="5">
        <div class="progress-indicator">Página 5 de 10</div>
        <div class="form-group">
            <label for="categoria">Categoría*</label>
            <select id="categoria" name="categoría_jugadora" class="form__select" required>
                <option value="">Selecciona una categoría</option>
                <option value="Olympeques (2019-2020)">Olympeques (2020-2021)</option>
                <option value="Benjamín (2015-2016-2017-2018)">Benjamín (2016-2017-2018-2019)</option>
                <option value="Alevín (2013-2014)">Alevín (2014-2015)</option>
                <option value="Infantil (2011-2012)">Infantil F7 y F11 (2012-2013)</option>
                <option value="Cadete F11 20 (2009-2010)">Cadete F11 20 (2010-2011)</option>
                <option value="Juvenil F11 (2006-2007-2008)">Juvenil F11 (2007-2008-2009)</option>
                <option value="Senior F11 (+18 años)">Senior F11 (+18 años)</option>
                <option value="Veteranas (+30 años)">Veteranas (+30 años)</option>
            </select>
            <div class="error-message" id="categoria_error"></div>
        </div>

        <div class="form-group">
            <label>¿Has jugado al fútbol antes?*</label>
            <div style="display: flex; gap: 15px; margin-top: 5px;">
                <label><input type="radio" name="experiencia_futbol" value="sí" required> Sí</label>
                <label><input type="radio" name="experiencia_futbol" value="no"> No</label>
            </div>
            <div class="error-message" id="experiencia_futbol_error"></div>
        </div>

        <div class="form-group">
            <label for="experiencia_detalles">En caso afirmativo, cuéntanos en qué equipos y cuál es tu posición</label>
            <textarea id="experiencia_detalles" name="experiencia_detalles"
                placeholder="Ej: CD Leganés, portera; Atlético Getafe, defensa central..." rows="4"></textarea>
            <div class="error-message" id="experiencia_detalles_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 5)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 5)"> &gt;</button>
        </div>
    </div>

    <!-- Página 6 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="6">
        <div class="progress-indicator">Página 6 de 10</div>
        <div class="form-group">
            <label for="nombre_madre">Nombre Completo Madre/Tutor*</label>
            <input type="text" id="nombre_madre" name="nombre_madre" placeholder="Ej: Laura Martínez" required>
            <div class="error-message" id="nombre_madre_error"></div>
        </div>

        <div class="form-group">
            <label for="dni_madre">DNI Madre/Tutor*</label>
            <input type="text" id="dni_madre" name="dni_madre" placeholder="Ej: 12345678A" required>
            <div class="error-message" id="dni_madre_error"></div>
        </div>

        <div class="form-group">
            <label for="lugar_nacimiento_madre">Lugar Nacimiento Madre/Tutor*</label>
            <input type="text" id="lugar_nacimiento_madre" name="lugar_nacimiento_madre" placeholder="Ej: Madrid"
                required>
            <div class="error-message" id="lugar_nacimiento_madre_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 6)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 6)"> &gt;</button>
        </div>
    </div>

    <!-- Página 7 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="7">
        <div class="progress-indicator">Página 7 de 10</div>
        <div class="form-group">
            <label for="email_madre">Email Madre/Tutor*</label>
            <input type="email" id="email_madre" name="email_madre" placeholder="correo@ejemplo.com" required>
            <div class="error-message" id="email_madre_error"></div>
        </div>

        <div class="form-group">
            <label for="telefono_madre">Teléfono Madre/Tutor*</label>
            <input type="tel" id="telefono_madre" name="telefono_madre" placeholder="Ej: 600123456" required>
            <div class="error-message" id="telefono_madre_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 7)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 7)"> &gt;</button>
        </div>
    </div>

    <!-- Página 8 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="8">
        <div class="progress-indicator">Página 8 de 10</div>
        <div class="form-group">
            <label for="nombre_padre">Nombre Completo Padre*</label>
            <input type="text" id="nombre_padre" name="nombre_padre" placeholder="Ej: Juan Pérez" required>
            <div class="error-message" id="nombre_padre_error"></div>
        </div>

        <div class="form-group">
            <label for="dni_padre">DNI Padre*</label>
            <input type="text" id="dni_padre" name="dni_padre" placeholder="Ej: 12345678B" required>
            <div class="error-message" id="dni_padre_error"></div>
        </div>

        <div class="form-group">
            <label for="lugar_nacimiento_padre">Lugar Nacimiento Padre*</label>
            <input type="text" id="lugar_nacimiento_padre" name="lugar_nacimiento_padre" placeholder="Ej: Barcelona"
                required>
            <div class="error-message" id="lugar_nacimiento_padre_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 8)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 8)"> &gt;</button>
        </div>
    </div>

    <!-- Página 9 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="9">
        <div class="progress-indicator">Página 9 de 10</div>
        <div class="form-group">
            <label for="email_padre">Email Padre*</label>
            <input type="email" id="email_padre" name="email_padre" placeholder="correo@ejemplo.com" required>
            <div class="error-message" id="email_padre_error"></div>
        </div>

        <div class="form-group">
            <label for="telefono_padre">Teléfono Padre*</label>
            <input type="tel" id="telefono_padre" name="telefono_padre" placeholder="Ej: 600123456" required>
            <div class="error-message" id="telefono_padre_error"></div>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 9)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="nextPage(1, 9)"> &gt;</button>
        </div>
    </div>

    <!-- Página 10 de Paso 1 -->
    <div class="form-page" data-step="1" data-page="10">
        <div class="progress-indicator">Página 10 de 10</div>
        <div class="form-group">
            <label>
                <input type="checkbox" name="acepto_normas" required>
                Acepto las normas y requisitos del club.*
            </label>
            <div class="error-message" id="acepto_normas_error"></div>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="acepto_politica_privacidad" required>
                Acepto la política de privacidad.*
            </label>
            <div class="error-message" id="acepto_politica_privacidad_error"></div>
        </div>

        <div class="form-group">
            <p>
                Si no nos permite utilizar estos datos es posible que no podamos prestarle los servicios solicitados,
                pues tal información es necesaria para que podamos desarrollar nuestra actividad de manera coherente y
                efectiva.
            </p>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="consiento_datos_salud" required>
                Consiento el uso de los datos relativos a mi salud o, en su caso, como tutores a la salud de mi hijo o
                menor a
                nuestro cargo para poder recibir los servicios solicitados.*
            </label>
            <div class="error-message" id="consiento_datos_salud_error"></div>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="consiento_imagen_redes">
                Consiento que se utilice mi imagen o, en su caso, como tutores la imagen de nuestro hijo o menor a
                nuestro cargo
                para su publicación a través de las redes sociales con el fin de dar a conocer la entidad y difundir su
                actividad.
            </label>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="consiento_imagen_internet">
                Consiento la publicación de mi imagen o, en su caso, la imagen de nuestro hijo o menor a nuestro cargo
                en
                Internet y otros medios similares para difundir las actividades de su entidad.
            </label>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="consiento_publicidad">
                Consiento el uso de mis datos personales para recibir publicidad de su entidad.
            </label>
        </div>

        <div class="form-group">
            <p>
                Podrá retirar cualquiera de estos consentimientos cuando lo considere oportuno.
            </p>
        </div>

        <div class="nav-arrows">
            <button type="button" class="arrow-btn" onclick="prevPage(1, 10)">&lt; </button>
            <button type="button" class="arrow-btn" onclick="saveStep(1)">Guardar</button>
        </div>
    </div>
</div>

        <!-- Paso 2: Autorización de Domiciliación Bancaria -->
        <div class="form-container" id="step2Form">
            <h2>Autorización de Domiciliación Bancaria</h2>
        
            <div class="form-page active" data-step="2" data-page="1">
                <div class="progress-indicator">Página 1 de 2</div>
        
                <div class="club-info-section"
                    style="background-color: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 25px;">
                    <h3 style="color: var(--oro); margin-top: 0;">Datos del Club</h3>
                    <p><strong>Identificador del acreedor:</strong> G87362638</p>
                    <p><strong>Nombre del acreedor:</strong> CLUB DEPORTIVO BÁSICO FÚTBOL FEMENINO OLYMPIA LAS ROZAS</p>
                    <p><strong>Dirección del acreedor:</strong> CALLE TERUEL 3, 28231 LAS ROZAS DE MADRID, ESPAÑA</p>
                </div>
        
                <div class="authorization-section"
                    style="background-color: rgba(10, 26, 47, 0.3); padding: 20px; border-radius: 10px; margin-bottom: 25px;">
                    <h3 style="color: var(--oro); margin-top: 0;">Autorización</h3>
                    <p>Mediante la firma de esta orden de domiciliación, Usted autoriza a:</p>
                    <p>(A) Al Acreedor Club Deportivo Básico Fútbol Femenino Olympia Las Rozas a enviar órdenes a su entidad
                        financiera para adeudar en su cuenta</p>
                    <p>(B) A su entidad financiera para adeudar los importes correspondientes en su cuenta, de acuerdo con las
                        órdenes del acreedor.</p>
                    <p>Como parte de sus derechos, el deudor está legitimado a ser reembolsado por su entidad financiera de
                        acuerdo a los términos y condiciones del contrato suscrito con la misma.</p>
                    <p>Dicho reembolso deberá reclamarse en un plazo máximo de 8 semanas a partir de la fecha en que se realizó
                        el adeudo en su cuenta.</p>
                </div>
        
                <div class="form-group">
                    <label for="nombre_deudor">Nombre y Apellidos del Titular de la Cuenta*</label>
                    <input type="text" id="nombre_deudor" name="nombre_deudor" required>
                    <div class="error-message" id="nombre_deudor_error"></div>
                </div>
        
                <div class="form-group">
                    <label for="direccion_deudor">Domicilio del Titular*</label>
                    <input type="text" id="direccion_deudor" name="direccion_deudor" required>
                    <div class="error-message" id="direccion_deudor_error"></div>
                </div>
        
                <div class="nav-arrows">
                    <button type="button" class="arrow-btn" disabled>&lt; Anterior</button>
                    <button type="button" class="arrow-btn" onclick="nextPage(2, 1)">Siguiente &gt;</button>
                </div>
            </div>
        
            <div class="form-page" data-step="2" data-page="2">
                <div class="progress-indicator">Página 2 de 2</div>
        
                <div class="form-row" style="display: flex; gap: 15px;">
                    <div class="form-group" style="flex: 1;">
                        <label for="codigo_postal_deudor">Código Postal*</label>
                        <input type="text" id="codigo_postal_deudor" name="codigo_postal_deudor" required>
                        <div class="error-message" id="codigo_postal_deudor_error"></div>
                    </div>
        
                    <div class="form-group" style="flex: 2;">
                        <label for="poblacion_deudor">Población*</label>
                        <input type="text" id="poblacion_deudor" name="poblacion_deudor" required>
                        <div class="error-message" id="poblacion_deudor_error"></div>
                    </div>
                </div>
        
                <div class="form-row" style="display: flex; gap: 15px;">
                    <div class="form-group" style="flex: 1;">
                        <label for="provincia_deudor">Provincia*</label>
                        <input type="text" id="provincia_deudor" name="provincia_deudor" required>
                        <div class="error-message" id="provincia_deudor_error"></div>
                    </div>
        
                    <div class="form-group" style="flex: 1;">
                        <label for="pais_deudor">País*</label>
                        <input type="text" id="pais_deudor" name="pais_deudor" value="España" required>
                        <div class="error-message" id="pais_deudor_error"></div>
                    </div>
                </div>
        
                <div class="form-group">
                    <label for="swift_code">SWIFT Code (entre 8 y 11 caracteres)</label>
                    <input type="text" id="swift_code" name="swift_code" placeholder="Ej: BBVAESMM">
                    <div class="error-message" id="swift_code_error"></div>
                </div>
        
                <div class="form-group">
                    <label for="iban">IBAN - Número de cuenta*</label>
                    <input type="text" id="iban" name="iban" placeholder="Ej: ESXX XXXX XXXX XX XXXXXXXXX" required>
                    <div class="error-message" id="iban_error"></div>
                </div>
        
                <div class="form-group">
                    <label>Tipo de Pago*</label>
                    <div class="radio-options" style="margin-top: 10px;">
                        <div class="radio-option" style="margin-bottom: 10px;">
                            <input type="radio" id="pago_recurrente" name="tipo_pago" value="recurrente" required>
                            <label for="pago_recurrente" style="margin-left: 8px; cursor: pointer;">Pago Recurrente</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pago_unico" name="tipo_pago" value="unico">
                            <label for="pago_unico" style="margin-left: 8px; cursor: pointer;">Pago Único</label>
                        </div>
                    </div>
                    <div class="error-message" id="tipo_pago_error"></div>          
                </div>
                <div class="form-group">
                    <label for="firma_digital">Firma Digital*</label>
                    <input type="text" id="firma_digital" name="firma_digital"
                        placeholder="Escriba su nombre completo como firma" required>
                    <div class="error-message" id="firma_digital_error"></div>
                </div>
        
                <div class="form-group">
                    <label for="dni_firma">DNI del Firmante*</label>
                    <input type="text" id="dni_firma" name="dni_firma" required>
                    <div class="error-message" id="dni_firma_error"></div>
                </div>
        
                <div class="form-group">
                    <label>
                        <input type="checkbox" name="acepto_domiciliacion" required>
                        Autorizo expresamente la domiciliación de los pagos según los términos descritos*
                    </label>
                    <div class="error-message" id="acepto_domiciliacion_error"></div>
                </div>
        
                <div class="nav-arrows">
                    <button type="button" class="arrow-btn" onclick="prevPage(2, 2)">&lt; Anterior</button>
                    <button type="button" class="arrow-btn" onclick="saveStep(2)">Guardar Autorización</button>
                </div>
            </div>
        </div>

    <!-- Paso 3: Autorización para Menores -->
    <div class="form-container" id="step3Form">
        <h2>Autorización para Inscribir a un Menor de Edad</h2>
    
        <div class="form-page active" data-step="3" data-page="1">
            <div class="progress-indicator">Página 1 de 2</div>
    
            <div class="authorization-header" style="text-align: center; margin-bottom: 20px;">
                <p>En las Rozas de Madrid, a <input type="text" style="width: 40px; text-align: center;" placeholder="dd">
                    de
                    <input type="text" style="width: 100px; text-align: center;" placeholder="mes"> de 2.0<input type="text"
                        style="width: 40px; text-align: center;" placeholder="aa">
                </p>
            </div>
    
            <div class="form-group">
                <label>Por medio de la presente, el/los abajo firmante/s, ostentando, individual o conjuntamente,
                    la patria potestad o tutela de la menor:</label>
                <input type="text" id="nombre_menor" name="nombre_menor" required>
            </div>
    
            <div class="form-row" style="display: flex; gap: 15px;">
                <div class="form-group" style="flex: 1;">
                    <label for="dni_menor">DNI/NIE/Nº de pasaporte</label>
                    <input type="text" id="dni_menor" name="dni_menor" required>
                </div>
                <div class="form-group" style="flex: 2;">
                    <label for="domicilio_menor">y con domicilio en</label>
                    <input type="text" id="domicilio_menor" name="domicilio_menor" required>
                </div>
            </div>
    
            <div class="authorization-text"
                style="background-color: rgba(212, 175, 55, 0.1); padding: 15px; border-radius: 8px; margin: 20px 0;">
                <p><strong>AUTORIZAN</strong></p>
                <p>Su inscripción en el Club de Fútbol Femenino Olympia Las Rozas (en adelante El Club) pudiendo
                    participar en las jornadas semanales de entrenamiento programadas, así como en las
                    competiciones oficiales y no oficiales que dispute el equipo/s del que la referida jugadora formará
                    parte. A tales efectos asumen toda la responsabilidad de su participación,
                    comprometiéndose, si fuera preciso, a constatar que ostentan su patria potestad/tutela.</p>
                <p>Dicha autorización tendrá efectos desde su firma y mientras se mantenga su inscripción como
                    jugadora del Club, o la misma sea revocada expresamente por alguno de los aquí firmantes en
                    la medida que mantengan la condición que les legitima a estos efectos.</p>
            </div>
    
            <h3 style="margin-top: 30px;">Firma de Tutores</h3>
    
            <div class="tutor-section" style="display: flex; gap: 20px; margin-bottom: 20px;">
                <div class="tutor-form" style="flex: 1;">
                    <div class="form-group">
                        <label for="nombre_madre">Nombre y Apellidos Madre/Tutora</label>
                        <input type="text" id="nombre_madre" name="nombre_madre">
                    </div>
                    <div class="form-group">
                        <label for="dni_madre">DNI/NIE/Pasaporte</label>
                        <input type="text" id="dni_madre" name="dni_madre">
                    </div>
                    <div class="form-group">
                        <label for="firma_madre">Firma Digital Madre/Tutora</label>
                        <input type="text" id="firma_madre" name="firma_madre"
                            placeholder="Escriba su nombre completo como firma">
                    </div>
                </div>
    
                <div class="tutor-form" style="flex: 1;">
                    <div class="form-group">
                        <label for="nombre_padre">Nombre y Apellidos Padre/Tutor</label>
                        <input type="text" id="nombre_padre" name="nombre_padre">
                    </div>
                    <div class="form-group">
                        <label for="dni_padre">DNI/NIE/Pasaporte</label>
                        <input type="text" id="dni_padre" name="dni_padre">
                    </div>
                    <div class="form-group">
                        <label for="firma_padre">Firma Digital Padre/Tutor</label>
                        <input type="text" id="firma_padre" name="firma_padre"
                            placeholder="Escriba su nombre completo como firma">
                    </div>
                </div>
            </div>
    
            <div class="nav-arrows">
                <button type="button" class="arrow-btn" disabled>&lt; Anterior</button>
                <button type="button" class="arrow-btn" onclick="nextPage(3, 1)">Siguiente &gt;</button>
            </div>
        </div>
    
        <div class="form-page" data-step="3" data-page="2">
            <div class="progress-indicator">Página 2 de 2</div>
    
            <h3>Declaración Responsable (Solo rellenar en caso de ser un único progenitor)</h3>
    
            <div class="declaration-header" style="text-align: center; margin-bottom: 20px;">
                <p>En las Rozas de Madrid, a <input type="text" style="width: 40px; text-align: center;" placeholder="dd">
                    de
                    <input type="text" style="width: 100px; text-align: center;" placeholder="mes"> de 2.0<input type="text"
                        style="width: 40px; text-align: center;" placeholder="aa">
                </p>
            </div>
    
            <div class="form-group">
                <label>Don/Doña</label>
                <input type="text" id="nombre_progenitor" name="nombre_progenitor">
            </div>
    
            <div class="form-row" style="display: flex; gap: 15px;">
                <div class="form-group" style="flex: 1;">
                    <label for="dni_progenitor">con DNI/NIE/Nº de pasaporte</label>
                    <input type="text" id="dni_progenitor" name="dni_progenitor">
                </div>
                <div class="form-group" style="flex: 2;">
                    <label for="nombre_jugadora_decl">como padre/madre/tutor o representante legal de la Jugadora</label>
                    <input type="text" id="nombre_jugadora_decl" name="nombre_jugadora_decl">
                </div>
            </div>
    
            <div class="form-group">
                <label style="font-weight: bold;">DECLARO Que la inscripción en el Club de Fútbol Femenino Olympia Las Rozas
                    a la que se adjunta esta
                    declaración, está firmada por uno solo de los progenitores debido a: (Señale lo que proceda)</label>
    
                <div class="radio-options" style="margin-top: 15px;">
                    <div class="radio-option" style="margin-bottom: 10px;">
                        <input type="radio" id="motivo_monoparental" name="motivo_unico_progenitor" value="monoparental">
                        <label for="motivo_monoparental" style="margin-left: 8px;">Familia monoparental</label>
                    </div>
                    <div class="radio-option" style="margin-bottom: 10px;">
                        <input type="radio" id="motivo_fallecimiento" name="motivo_unico_progenitor" value="fallecimiento">
                        <label for="motivo_fallecimiento" style="margin-left: 8px;">Fallecimiento del otro
                            progenitor</label>
                    </div>
                    <div class="radio-option" style="margin-bottom: 10px;">
                        <input type="radio" id="motivo_privacion" name="motivo_unico_progenitor" value="privacion">
                        <label for="motivo_privacion" style="margin-left: 8px;">Privación al otro progenitor de la patria
                            potestad</label>
                    </div>
                    <div class="radio-option" style="margin-bottom: 10px;">
                        <input type="radio" id="motivo_alejamiento" name="motivo_unico_progenitor" value="alejamiento">
                        <label for="motivo_alejamiento" style="margin-left: 8px;">Orden o sentencia de alejamiento</label>
                    </div>
                    <div class="radio-option" style="margin-bottom: 10px;">
                        <input type="radio" id="motivo_consentimiento" name="motivo_unico_progenitor"
                            value="consentimiento">
                        <label for="motivo_consentimiento" style="margin-left: 8px;">Consentimiento expreso del otro
                            progenitor</label>
                    </div>
                    <div class="radio-option" style="margin-bottom: 10px;">
                        <input type="radio" id="motivo_otras" name="motivo_unico_progenitor" value="otras">
                        <label for="motivo_otras" style="margin-left: 8px;">Otras circunstancias (especificar)</label>
                        <input type="text" id="otras_circunstancias" name="otras_circunstancias"
                            style="margin-left: 25px; width: 60%;">
                    </div>
                </div>
            </div>
    
            <div class="form-group">
                <label for="firma_declaracion">Firma Digital</label>
                <input type="text" id="firma_declaracion" name="firma_declaracion"
                    placeholder="Escriba su nombre completo como firma">
            </div>
    
            <div class="club-footer" style="text-align: center; margin-top: 30px;">
                <p style="font-weight: bold; color: var(--oro);">CFF OLYMPIA LAS ROZAS</p>
                <p>Abriendo camino, cumpliendo sueños desde 2015</p>
            </div>
    
            <div class="nav-arrows">
                <button type="button" class="arrow-btn" onclick="prevPage(3, 2)">&lt; Anterior</button>
                <button type="button" class="arrow-btn" onclick="saveStep(3)">Guardar Autorización</button>
            </div>
        </div>
    </div>

        <!-- Paso 4: Protección de Datos -->
        <div class="form-container" id="step4Form">
            <h2>ANEXO - PROTECCIÓN DE DATOS</h2>
        
            <div class="form-page active" data-step="4" data-page="1">
                <div class="progress-indicator">Página 1 de 1</div>
        
                <div class="club-header" style="text-align: center; margin-bottom: 20px;">
                    <h3 style="color: var(--oro); margin-bottom: 5px;">CFF OLYMPIA LAS ROZAS</h3>
                    <p style="font-style: italic;">Abriendo camino, cumpliendo sueños desde 2015</p>
                </div>
        
                <div class="data-protection-text"
                    style="background-color: rgba(10, 26, 47, 0.1); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <p>De conformidad con la normativa vigente y aplicable en protección de datos de carácter personal, le
                        informamos que sus datos serán incorporados al sistema de tratamiento titularidad de Club de Fútbol
                        Femenino Olympia Las Rozas con CIF G87362638 y domicilio social sito en calle Teruel 3, 28231 Las Rozas
                        de Madrid, Madrid.</p>
        
                    <div class="data-points" style="margin-top: 15px;">
                        <p><strong> Responsable del Tratamiento:</strong> CDB Fútbol Femenino Olympia Las Rozas</p>
                        <p><strong> Finalidad:</strong> Gestionar y facilitar el uso de la Web, el acceso a los servicios
                            contratados, solucionar sus consultas, y la correcta organización, gestión y administración de
                            aquellos trámites realizados a través de la Web del Club, así como dar soporte a cualquier duda,
                            problema o reclamación que pudieran surgir con el uso de la Web. Envío por cualquier medio
                            incluyendo por correo electrónico, u otra información equivalente de comunicación electrónica,
                            publicidad o promociones sobre los productos o servicios del Club, de los patrocinadores del Club,
                            siempre que haya prestado o solicitado su consentimiento y dándole la posibilidad de darse de baja
                            en cada comunicación.</p>
                        <p><strong> Plazo de conservación:</strong> Mientras esté inscrita la jugadora en el club</p>
                        <p><strong> Base legítima:</strong> El interés legítimo de acuerdo con la legislación vigente y
                            aplicable de protección de datos.</p>
                        <p><strong> Cesiones:</strong> Solo serán cedidos en caso de ser necesario a la/s entidad/es pública/s
                            competente/s.</p>
                    </div>
        
                    <p style="margin-top: 15px;">De acuerdo con los derechos que le confiere la normativa vigente y aplicable en
                        protección de datos podrá ejercer los derechos de acceso, rectificación, limitación de tratamiento,
                        supresión ("derecho al olvido"), portabilidad y oposición al tratamiento de sus datos de carácter
                        personal así como la revocación del consentimiento prestado para el tratamiento de los mismos,
                        dirigiendo su petición a la dirección postal indicada más arriba o al correo electrónico:
                        info@cffolympia.es.</p>
        
                    <p>Si las personas interesadas entienden que se han visto perjudicadas por el tratamiento o en el ejercicio
                        de sus derechos, pueden presentar una reclamación ante la Agencia Española de Protección de Datos a
                        través de la sede electrónica accesible en la página web <a href="https://www.aepd.es/"
                            target="_blank">https://www.aepd.es/</a>.</p>
        
                    <p style="font-weight: bold; margin-top: 15px;">El CDB Fútbol Femenino Olympia Las Rozas informa que con la
                        firma del presente documento se otorga el consentimiento explícito para el tratamiento de los datos
                        según las finalidades mencionadas anteriormente.</p>
                </div>
        
                <div class="form-group">
                    <label for="nombre_firma_dp">Nombre y Apellidos*</label>
                    <input type="text" id="nombre_firma_dp" name="nombre_firma_dp" required>
                    <div class="error-message" id="nombre_firma_dp_error"></div>
                </div>
        
                <div class="form-group">
                    <label for="dni_firma_dp">DNI/NIE/Pasaporte*</label>
                    <input type="text" id="dni_firma_dp" name="dni_firma_dp" required>
                    <div class="error-message" id="dni_firma_dp_error"></div>
                </div>
        
                <div class="form-group">
                    <label for="firma_digital_dp">Firma Digital*</label>
                    <input type="text" id="firma_digital_dp" name="firma_digital_dp"
                        placeholder="Escriba su nombre completo como firma" required>
                    <div class="error-message" id="firma_digital_dp_error"></div>
                </div>
        
                <div class="form-group">
                    <label>
                        <input type="checkbox" name="acepto_proteccion_datos" required>
                        Acepto expresamente la política de protección de datos descrita anteriormente*
                    </label>
                    <div class="error-message" id="acepto_proteccion_datos_error"></div>
                </div>
        
                <div class="nav-arrows">
                    <button type="button" class="arrow-btn" disabled>&lt; Anterior</button>
                    <button type="button" class="arrow-btn" onclick="saveStep(4)">Guardar Aceptación</button>
                </div>
            </div>
        </div>

    <!-- Paso 5: Carta de Compromiso -->
    <div class="form-container" id="step5Form">
        <h2>Carta de Compromiso</h2>
    
        <div class="form-page active" data-step="5" data-page="1">
            <div class="progress-indicator">Página 1 de 1</div>
    
            <div class="club-header" style="text-align: center; margin-bottom: 20px;">
                <h3 style="color: var(--oro); margin-bottom: 5px;">CFF OLYMPIA LAS ROZAS</h3>
                <p style="font-style: italic;">Abriendo camino, cumpliendo sueños desde 2015</p>
            </div>
    
            <div class="date-section" style="text-align: center; margin-bottom: 20px;">
                <p>En las Rozas de Madrid, a
                    <input type="text" style="width: 40px; text-align: center;" placeholder="dd"> de
                    <input type="text" style="width: 100px; text-align: center;" placeholder="mes"> de 2.0
                    <input type="text" style="width: 40px; text-align: center;" placeholder="aa">
                </p>
            </div>
    
            <div class="form-row" style="display: flex; gap: 15px; margin-bottom: 20px;">
                <div class="form-group" style="flex: 2;">
                    <label for="nombre_jugadora_comp">Nombre de la Jugadora</label>
                    <input type="text" id="nombre_jugadora_comp" name="nombre_jugadora_comp" required>
                </div>
                <div class="form-group" style="flex: 1;">
                    <label for="dni_jugadora_comp">DNI de la Jugadora</label>
                    <input type="text" id="dni_jugadora_comp" name="dni_jugadora_comp">
                </div>
            </div>
    
            <div class="commitment-section"
                style="background-color: rgba(212, 175, 55, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                <h3 style="color: var(--oro); margin-top: 0;">Compromisos</h3>
    
                <div class="commitment-item" style="display: flex; margin-bottom: 15px;">
                    <input type="checkbox" id="compromiso1" name="compromiso1" required
                        style="margin-right: 10px; margin-top: 3px;">
                    <label for="compromiso1" style="flex: 1;">A tener un comportamiento correcto y con respeto hacia los
                        entrenadores, jugadores, directivos, adversarios, árbitros, público o empleados del club durante los
                        entrenamientos, partidos, concentraciones y cualquier actividad que esté relacionado con el
                        club.</label>
                </div>
    
                <div class="commitment-item" style="display: flex; margin-bottom: 15px;">
                    <input type="checkbox" id="compromiso2" name="compromiso2" required
                        style="margin-right: 10px; margin-top: 3px;">
                    <label for="compromiso2" style="flex: 1;">Aceptar las derrotas y las victorias con deportividad sin
                        meterme con nadie.</label>
                </div>
    
                <div class="commitment-item" style="display: flex; margin-bottom: 15px;">
                    <input type="checkbox" id="compromiso3" name="compromiso3" required
                        style="margin-right: 10px; margin-top: 3px;">
                    <label for="compromiso3" style="flex: 1;">A respetar las más elementales reglas del trato social y de
                        respeto a las personas e instituciones cuando utilicen WhatsApp, redes sociales o lleven a cabo
                        comunicaciones públicas.</label>
                </div>
    
                <div class="commitment-item" style="display: flex; margin-bottom: 15px;">
                    <input type="checkbox" id="compromiso4" name="compromiso4" required
                        style="margin-right: 10px; margin-top: 3px;">
                    <label for="compromiso4" style="flex: 1;">A acatar cualquier orden del entrenador cuando éste se halle
                        en funciones como tal, y permanecerá en el campo, la concentración, o la reunión, mientras no se
                        diga lo contrario.</label>
                </div>
    
                <div class="commitment-item" style="display: flex; margin-bottom: 15px;">
                    <input type="checkbox" id="compromiso5" name="compromiso5" required
                        style="margin-right: 10px; margin-top: 3px;">
                    <label for="compromiso5" style="flex: 1;">A asistir puntualmente a todas las sesiones de fuerza y a los
                        entrenamientos programados, salvo los que el entrenador designe como "voluntarios". Solamente el
                        entrenador, según su criterio, puede dar permiso para faltar o llegar con retraso a ellos.</label>
                </div>
    
                <div class="commitment-item" style="display: flex; margin-bottom: 15px;">
                    <input type="checkbox" id="compromiso6" name="compromiso6" required
                        style="margin-right: 10px; margin-top: 3px;">
                    <label for="compromiso6" style="flex: 1;">A informar con antelación al entrenador si no puede asistir a
                        un entrenamiento o a un partido a causa de una enfermedad o algún imprevisto.</label>
                </div>
    
                <p style="font-style: italic; margin-top: 20px;">En caso de no cumplir con lo aquí previsto el club tomará
                    las medidas oportunas, reservándose, en todo caso, el derecho de admisión.</p>
            </div>
    
            <div class="signatures-section" style="margin-top: 30px;">
                <h3 style="color: var(--oro);">Firmas</h3>
    
                <div class="form-row" style="display: flex; gap: 20px; margin-top: 15px;">
                    <div class="form-group" style="flex: 1;">
                        <label for="firma_jugadora">Firma de la Jugadora</label>
                        <input type="text" id="firma_jugadora" name="firma_jugadora"
                            placeholder="Nombre completo como firma" required>
                    </div>
    
                    <div class="form-group" style="flex: 1;">
                        <label for="firma_tutor_comp">Firma Padre/Madre/Tutor</label>
                        <input type="text" id="firma_tutor_comp" name="firma_tutor_comp"
                            placeholder="Nombre completo como firma" required>
                    </div>
                </div>
            </div>
    
            <div class="nav-arrows">
                <button type="button" class="arrow-btn" onclick="prevPage(5, 1)">&lt; Anterior</button>
                <button type="button" class="arrow-btn" onclick="saveStep(5)">Guardar Compromiso</button>
            </div>
        </div>
    </div>

        <!-- Paso 6: Revisión -->
        <div class="review-container" id="step6Review">
            <h2>Revisión Final</h2>

            <div class="review-section">
                <h3>Información Básica</h3>
                <table class="review-table">
                    <tr>
                        <td>Nombre Completo:</td>
                        <td id="review-nombre_completo"></td>
                    </tr>
                    <tr>
                        <td>Fecha de Nacimiento:</td>
                        <td id="review-fecha_nacimiento"></td>
                    </tr>
                    <tr>
                        <td>DNI/NIE:</td>
                        <td id="review-dni"></td>
                    </tr>
                </table>
            </div>

            <div class="review-section">
                <h3>Domiciliación</h3>
                <table class="review-table">
                    <tr>
                        <td>Dirección:</td>
                        <td id="review-direccion"></td>
                    </tr>
                    <tr>
                        <td>Código Postal:</td>
                        <td id="review-codigo_postal"></td>
                    </tr>
                    <tr>
                        <td>Localidad:</td>
                        <td id="review-localidad"></td>
                    </tr>
                </table>
            </div>

            <div class="review-section">
                <h3>Autorización para Menores</h3>
                <table class="review-table">
                    <tr>
                        <td>Nombre del Tutor:</td>
                        <td id="review-nombre_tutor"></td>
                    </tr>
                    <tr>
                        <td>DNI del Tutor:</td>
                        <td id="review-dni_tutor"></td>
                    </tr>
                    <tr>
                        <td>Autorización:</td>
                        <td id="review-autorizacion"></td>
                    </tr>
                </table>
            </div>

            <div class="review-section">
                <h3>Protección de Datos</h3>
                <table class="review-table">
                    <tr>
                        <td>Aceptación política:</td>
                        <td id="review-proteccion_datos"></td>
                    </tr>
                    <tr>
                        <td>Consentimiento imagen:</td>
                        <td id="review-consentimiento_imagen"></td>
                    </tr>
                </table>
            </div>

            <div class="review-section">
                <h3>Compromiso</h3>
                <table class="review-table">
                    <tr>
                        <td>Horarios:</td>
                        <td id="review-compromiso_horarios"></td>
                    </tr>
                    <tr>
                        <td>Normas del club:</td>
                        <td id="review-compromiso_normas"></td>
                    </tr>
                </table>
            </div>

            <div class="navigation-buttons">
                <button type="button" class="secondary" onclick="returnToStepsMenu()">Volver a pasos</button>
                <button type="button" onclick="submitForm()">Enviar Inscripción</button>
            </div>
        </div>
    </div>

    <!-- Contenedor para mensajes -->
    <div id="messageContainer" style="margin-top: 20px;"></div>

    <script>
        // Objeto para almacenar los datos del formulario
        const formData = {
            step1: { completed: false, data: {}, currentPage: 1, totalPages: 10 },
            step2: { completed: false, data: {}, currentPage: 1, totalPages: 2 },
            step3: { completed: false, data: {}, currentPage: 1, totalPages: 2 },
            step4: { completed: false, data: {}, currentPage: 1, totalPages: 1 },
            step5: { completed: false, data: {}, currentPage: 1, totalPages: 1 }
        };

        // Mostrar el menú de pasos al cargar la página
        document.addEventListener('DOMContentLoaded', function () {
            showStepsMenu();
        });

        // Función para mostrar el menú de pasos
        function showStepsMenu() {
            document.getElementById('currentFormContainer').style.display = 'none';
            document.getElementById('stepsMenu').style.display = 'grid';
            updateStepCards();
        }

        // Función para navegar a un paso específico
        function navigateToStep(stepNumber) {
            const stepCard = document.querySelector(`.step-card[data-step="${stepNumber}"]`);

            // Si el paso está bloqueado y no está completado, no permitir navegar
            if (stepNumber > 1 && !formData[`step${stepNumber - 1}`].completed &&
                stepCard.classList.contains('locked') && stepNumber !== 6) {
                return;
            }

            // Ocultar menú de pasos
            document.getElementById('stepsMenu').style.display = 'none';
            document.getElementById('currentFormContainer').style.display = 'block';

            // Ocultar todos los formularios
            document.querySelectorAll('.form-container, .review-container').forEach(el => {
                el.classList.remove('active');
            });

            // Mostrar el formulario correspondiente
            if (stepNumber === 6) {
                prepareReviewData();
                document.getElementById('step6Review').classList.add('active');
            } else {
                const step = formData[`step${stepNumber}`];
                showStepPage(stepNumber, step.currentPage);
                document.getElementById(`step${stepNumber}Form`).classList.add('active');
            }
        }

        // Función para mostrar una página específica de un paso
        function showStepPage(stepNumber, pageNumber) {
            const formContainer = document.getElementById(`step${stepNumber}Form`);
            formContainer.querySelectorAll('.form-page').forEach(page => {
                page.classList.remove('active');
            });

            const pageToShow = formContainer.querySelector(`.form-page[data-page="${pageNumber}"]`);
            if (pageToShow) {
                pageToShow.classList.add('active');

                // Actualizar el indicador de progreso
                const progressIndicator = pageToShow.querySelector('.progress-indicator');
                if (progressIndicator) {
                    progressIndicator.textContent = `Página ${pageNumber} de ${formData[`step${stepNumber}`].totalPages}`;
                }
            }
        }

        // Función para avanzar a la siguiente página dentro de un paso
        function nextPage(stepNumber, currentPage) {
            // Validar campos requeridos en la página actual
            const formContainer = document.getElementById(`step${stepNumber}Form`);
            const currentPageEl = formContainer.querySelector(`.form-page[data-page="${currentPage}"]`);
            const requiredInputs = currentPageEl.querySelectorAll('[required]');
            let isValid = true;

            requiredInputs.forEach(input => {
                if (input.type === 'checkbox' && !input.checked) {
                    isValid = false;
                    const errorElement = document.getElementById(`${input.name}_error`);
                    if (errorElement) errorElement.textContent = 'Este campo es obligatorio';
                } else if (input.type !== 'checkbox' && !input.value.trim()) {
                    isValid = false;
                    const errorElement = document.getElementById(`${input.name}_error`);
                    if (errorElement) errorElement.textContent = 'Este campo es obligatorio';
                } else {
                    const errorElement = document.getElementById(`${input.name}_error`);
                    if (errorElement) errorElement.textContent = '';
                }
            });

            if (!isValid) {
                showMessage('Por favor completa todos los campos requeridos', 'error');
                return;
            }

            // Guardar datos de la página actual
            savePageData(stepNumber, currentPage);

            // Avanzar a la siguiente página
            if (currentPage < formData[`step${stepNumber}`].totalPages) {
                formData[`step${stepNumber}`].currentPage = currentPage + 1;
                showStepPage(stepNumber, currentPage + 1);
            }
        }

        // Función para retroceder a la página anterior dentro de un paso
        function prevPage(stepNumber, currentPage) {
            if (currentPage > 1) {
                formData[`step${stepNumber}`].currentPage = currentPage - 1;
                showStepPage(stepNumber, currentPage - 1);
            }
        }

        // Función para guardar los datos de una página específica
        function savePageData(stepNumber, pageNumber) {
            const formContainer = document.getElementById(`step${stepNumber}Form`);
            const pageEl = formContainer.querySelector(`.form-page[data-page="${pageNumber}"]`);
            const inputs = pageEl.querySelectorAll('input, select, textarea');

            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    formData[`step${stepNumber}`].data[input.name] = input.checked;
                } else {
                    formData[`step${stepNumber}`].data[input.name] = input.value;
                }
            });
        }

        // Función para guardar un paso completo
        function saveStep(stepNumber) {
            // Guardar datos de la página actual
            const currentPage = formData[`step${stepNumber}`].currentPage;
            savePageData(stepNumber, currentPage);

            // Validar que todas las páginas estén completas
            let allPagesValid = true;
            for (let i = 1; i <= formData[`step${stepNumber}`].totalPages; i++) {
                const pageEl = document.querySelector(`#step${stepNumber}Form .form-page[data-page="${i}"]`);
                const requiredInputs = pageEl.querySelectorAll('[required]');

                requiredInputs.forEach(input => {
                    if (input.type === 'checkbox' && !input.checked) {
                        allPagesValid = false;
                    } else if (input.type !== 'checkbox' && !input.value.trim()) {
                        allPagesValid = false;
                    }
                });
            }

            if (!allPagesValid) {
                showMessage('Por favor completa todas las páginas de este paso', 'error');
                return;
            }

            // Marcar el paso como completado
            formData[`step${stepNumber}`].completed = true;

            // Actualizar tarjetas de pasos
            updateStepCards();

            // Mostrar mensaje de éxito
            showMessage(`Paso ${stepNumber} guardado`, 'success');

            // Volver al menú de pasos
            showStepsMenu();
        }

        // Función para actualizar las tarjetas de pasos
        function updateStepCards() {
            const stepCards = document.querySelectorAll('.step-card');

            stepCards.forEach(card => {
                const stepNumber = parseInt(card.dataset.step);

                // Resetear clases
                card.classList.remove('active', 'completed', 'locked');

                // Marcar pasos completados
                if (stepNumber < 6 && formData[`step${stepNumber}`].completed) {
                    card.classList.add('completed');
                }

                // Desbloquear pasos si el anterior está completado
                if (stepNumber === 1 ||
                    (stepNumber > 1 && formData[`step${stepNumber - 1}`].completed) ||
                    stepNumber === 6) {
                    card.classList.remove('locked');
                } else {
                    card.classList.add('locked');
                }
            });
        }

        // Función para preparar los datos de revisión
        function prepareReviewData() {
            // Información Básica
            document.getElementById('review-nombre_completo').textContent =
                formData.step1.data.nombre_completo || 'No completado';
            document.getElementById('review-fecha_nacimiento').textContent =
                formData.step1.data.fecha_nacimiento || 'No completado';
            document.getElementById('review-dni').textContent =
                formData.step1.data.dni || 'No completado';

            // Domiciliación
            document.getElementById('review-direccion').textContent =
                formData.step2.data.direccion || 'No completado';
            document.getElementById('review-codigo_postal').textContent =
                formData.step2.data.codigo_postal || 'No completado';
            document.getElementById('review-localidad').textContent =
                formData.step2.data.localidad || 'No completado';

            // Autorización Menor
            document.getElementById('review-nombre_tutor').textContent =
                formData.step3.data.nombre_tutor || 'No completado';
            document.getElementById('review-dni_tutor').textContent =
                formData.step3.data.dni_tutor || 'No completado';
            document.getElementById('review-autorizacion').textContent =
                formData.step3.data.autorizacion_menor ? 'Sí' : 'No';

            // Protección de Datos
            document.getElementById('review-proteccion_datos').textContent =
                formData.step4.data.proteccion_datos ? 'Aceptado' : 'No aceptado';
            document.getElementById('review-consentimiento_imagen').textContent =
                formData.step4.data.consentimiento_imagen ? 'Aceptado' : 'No aceptado';

            // Compromiso
            document.getElementById('review-compromiso_horarios').textContent =
                formData.step5.data.compromiso_horarios ? 'Aceptado' : 'No aceptado';
            document.getElementById('review-compromiso_normas').textContent =
                formData.step5.data.compromiso_normas ? 'Aceptado' : 'No aceptado';
        }

        // Función para volver al menú de pasos
        function returnToStepsMenu() {
            showStepsMenu();
        }

        // Función para mostrar mensajes
        function showMessage(message, type) {
            const container = document.getElementById('messageContainer');
            const alertClass = type === 'error' ? 'alert-error' :
                type === 'success' ? 'alert-success' : 'alert-info';
            container.innerHTML = `<div class="alert ${alertClass}">${message}</div>`;
            setTimeout(() => { container.innerHTML = ''; }, 5000);
        }

        // Función para enviar el formulario
        function submitForm() {
            // Verificar que todos los pasos estén completados
            const allStepsCompleted = Object.values(formData)
                .filter(step => step.completed !== undefined)
                .every(step => step.completed);

            if (!allStepsCompleted) {
                showMessage('Por favor completa todos los pasos antes de enviar', 'error');
                return;
            }

            // Obtener el CSRF token
            const csrfToken = getCSRFToken();
            if (!csrfToken) {
                showMessage('Error de seguridad. Por favor recarga la página.', 'error');
                return;
            }

            // Crear objeto con todos los datos
            const formDataJSON = {
                csrfmiddlewaretoken: csrfToken
            };

            // Añadir todos los datos del formulario
            for (const step in formData) {
                for (const field in formData[step].data) {
                    formDataJSON[field] = formData[step].data[field];
                }
            }

            // Mostrar mensaje de envío
            showMessage('Enviando formulario...', 'info');

            // Enviar los datos via AJAX
            fetch("{% url 'enviar_email' %}", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrfToken,
                    'X-Requested-With': 'XMLHttpRequest'
                },
                body: JSON.stringify(formDataJSON)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error en la respuesta del servidor');
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.status === 'success') {
                        showMessage('✅ ' + data.message, 'success');
                        // Opcional: redirigir después de éxito
                        // window.location.href = '/exito/';
                    } else {
                        throw new Error(data.message || 'Error en el servidor');
                    }
                })
                .catch(error => {
                    showMessage('❌ Error al enviar el formulario: ' + error.message, 'error');
                    console.error('Error:', error);
                });
        }

        // Función auxiliar para obtener el CSRF token
        function getCSRFToken() {
            // 1. Intentar obtenerlo del input hidden
            const csrfInput = document.querySelector('[name=csrfmiddlewaretoken]');
            if (csrfInput && csrfInput.value) {
                return csrfInput.value;
            }

            // 2. Intentar obtenerlo de las cookies
            const cookieValue = document.cookie
                .split('; ')
                .find(row => row.startsWith('csrftoken='))
                ?.split('=')[1];

            return cookieValue || null;
        }
    </script>
</body>

</html>

{% endblock %}